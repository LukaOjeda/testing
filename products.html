<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Detalle del Producto</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .producto-container {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .producto-img {
        max-width: 150px;
      }
      .detalles {
        max-width: 600px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      h1 {
        margin-bottom: 10px;
      }
      .precio {
        font-size: 1.5em;
        color: #2e8b57;
        margin: 10px 0;
      }
      button {
        padding: 10px 20px;
        margin: 10px 5px 0 0;
        font-size: 1em;
        cursor: pointer;
        border: none;
        border-radius: 4px;
      }
      .agregar {
        background-color: #4caf50;
        color: white;
      }
      .volver {
        background-color: #555;
        color: white;
      }
    </style>
  </head>
  <body>
    <h1>Detalle del Producto</h1>

    <div class="producto-container">
      <!-- Imagen del producto -->
      <img id="productoImagen" class="producto-img" src="" alt="Imagen del producto" />

      <!-- Detalles del producto -->
      <div class="detalles" id="detalles">
        <h2 id="nombreProducto"></h2>
        <p id="descripcionProducto"></p>
        <div class="precio" id="precioProducto"></div>
        <button class="agregar" id="btnAgregar">Agregar al Carrito</button>
        <button class="volver" id="btnVolver">Volver a Lista</button>
      </div>
    </div>

    <script type="module">
      import { NewProducts } from "./assets/dummy.js";

      // Obtener el ID desde la URL
      const urlParams = new URLSearchParams(window.location.search);
      const idTest = urlParams.get("id");

      // Verificar si existe el producto
      const item = NewProducts[idTest];

      if (item) {
        // Mostrar los datos del producto en la página
        document.getElementById("nombreProducto").textContent = item.productName;
        document.getElementById("descripcionProducto").textContent = item.productInfo || "Descripción no disponible.";
        document.getElementById("precioProducto").textContent = `${item.productPrice}`;

        // Asignar la imagen (si tiene)
        document.getElementById("productoImagen").src = item.productPic || "https://via.placeholder.com/300x300?text=Sin+imagen";

        // Manejar clic en "Agregar al Carrito"
        document.getElementById("btnAgregar").addEventListener("click", () => {
          alert(`Producto "${item.productName}" agregado al carrito.`);
          // Aquí puedes agregar lógica para agregar el producto al carrito
        });

        // Manejar clic en "Volver a Lista"
        document.getElementById("btnVolver").addEventListener("click", () => {
          window.location.href = "index.html";
        });
      } else {
        document.getElementById("detalles").innerHTML = "<p>Producto no encontrado.</p>";
      }
    </script>

    <!-- Si necesitas usar sql.js o alguna librería adicional, inclúyela aquí -->
    <script src="https://cdn.jsdelivr.net/npm/sql.js/dist/sql-wasm.js"></script>
  </body>
</html>
